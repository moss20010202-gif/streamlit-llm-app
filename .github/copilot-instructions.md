# Copilot Instructions for streamlit-llm-app

## Project Overview
This is a Streamlit-based web application that provides AI-powered expert consultations. Users input queries and select from predefined expert personas (IT Consultant or Cooking Researcher), receiving responses generated by GPT-4o-mini via LangChain.

## Architecture
- **Single-file app**: All logic resides in `app.py` combining UI (Streamlit) and business logic (LLM processing)
- **LLM Integration**: Uses LangChain for prompt templating and response parsing
- **Environment Management**: Loads API keys via `python-dotenv` from `.env` file
- **Data Flow**: User input → Persona selection → Prompt construction → LangChain chain execution → Streamlit display

## Key Components
- `get_llm_response()`: Core function handling persona-specific prompt creation and LLM invocation
- Streamlit form: Captures user input and persona selection
- LangChain chain: `prompt | llm | StrOutputParser()` for structured response generation

## Developer Workflows
- **Run app**: `streamlit run app.py` (activate virtual env first: `env\Scripts\activate`)
- **Environment setup**: Create `.env` file with `OPENAI_API_KEY=your_key_here`
- **Dependencies**: Install via `pip install -r requirements.txt` in virtual environment

## Code Patterns
- **Persona-based prompts**: System messages defined conditionally based on `persona_type` radio selection
- **Error handling**: Try-except in LLM response generation with Streamlit error display
- **UI state management**: Form submission triggers spinner and response display
- **LangChain usage**: Always use `ChatPromptTemplate.from_messages()` for multi-turn prompts, pipe to `StrOutputParser()` for string output

## Examples
- **Adding new persona**: Extend `if persona_type == "..."` in `get_llm_response()` with new system message
- **Modifying temperature**: Change in `ChatOpenAI(model="gpt-4o-mini", temperature=0.7)`
- **UI customization**: Use Streamlit components like `st.spinner()`, `st.subheader()` for consistent styling

## Dependencies
- Streamlit for web UI
- LangChain/LangChain-OpenAI for LLM integration
- python-dotenv for environment variable management

Focus on extending persona options or enhancing prompt engineering when adding features.